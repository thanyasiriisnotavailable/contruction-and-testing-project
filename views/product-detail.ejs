<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('partials/head', { pageTitle: "Product" }); %>
    <link rel="stylesheet" href="/CSS/style.css" />
    <style>
      .size-option {
        cursor: pointer;
        margin-right: 5px;
        padding: 15px;
      }

      .selected-size {
        border-bottom: 2px solid black;
        border-radius: 5px;
        padding: 10px;
      }

      #container button {
        border: none;
        padding: 10px 10px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 4px;
        color: black;
        position: relative;
        left: -2px;
        margin-top: 40px;
      }

      .bagimg {
        width: 35px;
        height: auto;
        margin-bottom: 5px;
        margin-left: 5px;
      }

      .cart-item p {
        font-size: 20px;
      }

      .product-container {
        display: flex;
        align-items: center;
        /* Align items vertically */
        margin-left: 0;
      }

      .product-details {
        flex: 1;
        margin-right: 100px;
        margin-left: 20px;
        margin-top: 10px;
        text-align: center;
      }

      .add-to-cart-btn {
        white-space: nowrap;
        /* Prevent text from wrapping */
        margin-top: 40px;
        /* Adjust margin as needed */
        width: 250px;
        margin-right: 400px;
        color: black;
      }

      .product-details h2 {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        width: 100%;
        font-size: 20px;
      }

      .cart-item-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .product-description {
        margin-right: 10px;
      }

      .product-price {
        flex-shrink: 0;
        text-align: right;
      }
    </style>
  </head>

  <body>
    <%- include('partials/navbar'); %>

    <form id="addToCartForm" action="/add_to_cart" method="post">
      <div class="product-container">
        <img
          src="/image<%= product.product_images1 %>"
          width="530px"
          height="640px"
          alt="Product Image"
        />
        <div class="product-details">
          <input
            type="hidden"
            id="productName"
            name="product_name"
            value="<%= product.product_name %>"
          />
          <input type="hidden" id="productSize" name="product_size" value="" />
          <input
            type="hidden"
            id="productQuantity"
            name="product_quantity"
            value="0"
          />
          <input
            type="hidden"
            id="productPrice"
            name="product_price"
            value="<%= product.product_price %>"
          />
          <h2><%= product.product_name %></h2>
          <p><%= product.product_description %></p>
          <hr />
          <p><%= product.product_price %></p>
          <p>Size:</p>
          <p id="size-options">
            <span class="size-option">XS</span>
            <span class="size-option">S</span>
            <span class="size-option">M</span>
            <span class="size-option">L</span>
            <span class="size-option">XL</span>
            <span class="size-option">XXL</span>
          </p>
          <div id="container">
            <button id="decrementBtn" type="button">-</button>
            <span class="number" style="margin-top: 30px">0</span>
            <button id="incrementBtn" type="button">+</button>
          </div>
          <button class="btnproduct add-to-cart-btn">
            <img class="bagimg" src="/images/Bag_alt.png" />ADD TO CART
          </button>
        </div>
      </div>
    </form>

    <%- include('partials/footer') %>
    <script src="/controllers/wishlist/add-to-wishlist.js"></script>
    <script src="/controllers/wishlist/wishlist-icon-toggle.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const numberElement = document.querySelector(".number");
        const incrementBtn = document.getElementById("incrementBtn");
        const decrementBtn = document.getElementById("decrementBtn");
        let number = parseInt(numberElement.textContent);
        function updateNumber() {
          numberElement.textContent = number;
          document.getElementById("productQuantity").value = number;
        }

        incrementBtn.addEventListener("click", function () {
          number++;
          updateNumber();
        });

        decrementBtn.addEventListener("click", function () {
          if (number > 0) {
            number--;
            updateNumber();
          }
        });
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const sizeOptions = document.querySelectorAll(".size-option");
        const numberElement = document.querySelector(".number");

        let number = parseInt(numberElement.textContent);

        sizeOptions.forEach((option) => {
          option.addEventListener("click", function () {
            sizeOptions.forEach((opt) => opt.classList.remove("selected-size"));
            this.classList.add("selected-size");
            document.getElementById("productSize").value = this.textContent;
            document.getElementById("productQuantity").value = number;
          });
        });

        function updateNumber() {
          numberElement.textContent = number;
          document.getElementById("productQuantity").value = number;
        }

        document
          .getElementById("incrementBtn")
          .addEventListener("click", function () {
            number++;
            updateNumber();
          });

        document
          .getElementById("decrementBtn")
          .addEventListener("click", function () {
            if (number > 0) {
              number--;
              updateNumber();
            }
          });
      });
    </script>
  </body>
</html>