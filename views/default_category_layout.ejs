<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- font google -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
        
        <!-- Bootstrap CSS -->
        <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"/>
          <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"> -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
        <!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"> -->
 
             
        <!-- Font Awesom -->
        <script src="https://kit.fontawesome.com/752c6ea0dd.js" crossorigin="anonymous"></script>
    <title>JACQUEMUS</title>
    <link rel="stylesheet" href="/CSS/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
    
    .wishlist-icon {
            position: absolute;
            top: 130px;
            right: 170px;
            transform: translate(-50%, -50%);
            opacity: 1; /* Set opacity to 1 to always show the icon */
            z-index: 1; /* Ensure the icon is above the image */
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .carousel-item:hover .wishlist-icon {
            opacity: 1;
        }
        
        .wishlist-icon i {
            color: white; /* Set the default color of the heart icon */
            font-size: 30px;
        }
        
        .wishlist-icon i.clicked {
            color: red; /* Change color to red when clicked */
        }
        
        .carousel-img {
            position: relative; /* Ensure the container is positioned */
            width: 100%; /* Ensure the image fills its container */
            height: auto; /* Maintain aspect ratio */
        }
        .product-details {
    position: absolute;
    bottom: 1px;
    transform: translateX(-47%);
    visibility: hidden;
    opacity: 0;
    transition: visibility 0s, opacity 0.3s linear;
    color: black;
    width: 350px;
    height: auto;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: 35px;

}

.product-details p{
    font-size: 16px;
    margin: 0;
    line-height: 1.2;
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;

   
}

.left-details {
   text-align: left;
   flex: 1;
   margin-right: 40px;
 
}

.right-details {
    text-align: right;
   
}





.carousel-item:hover .product-details {
    visibility: visible;
    opacity: 1;
}

@media (max-width: 767px) {
        .imageBag{
    display: flex;
    justify-content: center;
    align-items: center;
    margin-left: 25px;
}}

    </style>
</head>
<body>
 
 
    <!-- Navbar with cart and wishlist -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="/html/Homepage.html">
          <img src="/images/jacquemus-logos-idHdmUIL-k.png" alt="Logo" width="120" class="navbar-brand element-with-space" href="/html/Homepage.html" >
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <button id="exitFullscreenButton" class="exit-fullscreen-button">&times;</button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a id="navbarDropdown" class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-category-id="your_category_id" data-category-name="your_category_name">
                            Product
                        </a>                        
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown" id="categoryDropdown">
                        </ul>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/html/ContactUs/contactus.html">contact us</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/html/Account/login.html">account</a>
                </li>
       
                <li class="nav-item">
                    <a class="d-lg-none nav-link mr-3" href="/wishlist">Favorite</a>
                    <a class="d-none d-lg-inline mr-3 nav-link" href="/wishlist">
                        <img src="/images/Favorite.png" alt="Favorite Icon" width="45" class="d-inline mr-3 nav-link"></a>
                </li>
                
                <li class="nav-item">
                    <a class="d-lg-none nav-link mr-3" href="/html/CartnWishlist/cart.html">Cart</a>
                    <a class="d-none d-lg-inline mr-3 nav-link" href="/html/CartnWishlist/cart.html">
                        <img src="/images/shopping-cart 1cart-icon.png" alt="Cart Icon" width="45" class="d-inline mr-3 nav-link"></a>
                </li>
            </ul>
        </div>
    </div>
</nav>
 
 
<div id="wishlist-container"></div>

 
<h3 style="margin-top: 50px;"><%= category_name %></h3>
<hr class="line">

<div class="container">
    <div class="row">
        <% products.forEach((product, index) => { %>
        <div class="col-lg-4 col-md-6 col-xs-6">
            <!-- Bag 1 -->
            <div id="carouselExampleControls<%= index %>" class="carousel slide">
                <div class="carousel-inner">
                    <div class="carousel-item active" product_id="<%= product.product_id %>">
                        <a href="/product_detail/<%= product.product_id %>">
                            <img class="imageBag" src="<%= product.product_images1 %>" alt="images">
                        </a>
                        <div class="wishlist-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="product-details">
                            <p><%= product.product_name %></p>
                            <p>Price: $<%= product.product_price %></p>
                        </div>
                    </div>
                    <div class="carousel-item" product_id="101">
                        <a href="/product_detail/<%= product.product_id%>">
                            <img class="imageBag" src="<%= product.product_images2 %>">
                        </a>
                        <div class="wishlist-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="product-details">
                            <p><%= product.product_name %></p>
                            <p>Price: $<%= product.product_price %></p>
                        </div>
                    </div>
                    <div class="carousel-item" product_id="101">
                        <a href="/product_detail/<%= product.product_id%>">
                            <img class="imageBag" src="<%= product.product_images3 %>">
                        </a>
                        <div class="wishlist-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="product-details">
                            <p><%= product.product_name %></p>
                            <p>Price: $<%= product.product_price %></p>
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls<%= index %>" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls<%= index %>" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
        <% }); %>
    </div>
</div>


 
<section id="intro-section">
    <div class="container-fluid bg-gray">
    <h4>Newsletter</h4><br>
    <p>Sign in to receive our lastest news about collection,
        products, shows and collaborations</p>
        <div class="email-input-container">
            <input type="email" id="email-input" placeholder="Enter your email">
            <button id="send-button" style="display: none;"><i class="fas fa-arrow-right"></i></button>
        </div>
    </div>
</section>
  <footer id="footer">
    <div class="container-fluid">
        <div class="left-part">
            <ul>
            <li><a class="nav-link" href="/html/Product/productall.html">product</a></li>
            
            <li>
                <a class="nav-link" href="/html/ContactUs/contactus.html">contact us</a>
            </li>
 
            <li>
                <a class="nav-link" href="/html/Account/login.html">account</a>
            </li>
            </ul>
        </div>
        <div class="right-part">
            <ul>
                <li><i>follow us</i></li>
                <li><i class="fab fa-twitter"></i><a class="nav-link" href="https://twitter.com/jacquemus"> jacquemus</a></li>
                <li><i class="fab fa-instagram"></i><a class="nav-link" href="https://www.instagram.com/jacquemus/">jacquemus</a></li>  
                <li><i class="fas fa-envelope"></i><a class="nav-link" href="mailto:customercare@jacquemus.com">customercare@jacquemus.com</a></li>
            </ul>
        </div>
        <ul>
        <li><i>© 2024, JACQUEMUS</i></li>
        </ul>
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const emailInput = document.getElementById('email-input');
const sendButton = document.getElementById('send-button');
 
emailInput.addEventListener('input', function() {
if (this.value.includes('@')) {
sendButton.style.display = 'inline-block';
} else {
sendButton.style.display = 'none';
}
});
 
</script>
<!-- Cross sign -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const exitFullscreenButton = document.getElementById('exitFullscreenButton');
        const navbarCollapse = document.querySelector('.navbar-collapse');
 
        exitFullscreenButton.style.display = 'none';
 
        const navbarToggler = document.querySelector('.navbar-toggler');
        navbarToggler.addEventListener('click', function() {
            if (!navbarCollapse.classList.contains('show')) {
                exitFullscreenButton.style.display = 'block';
            } else {
                exitFullscreenButton.style.display = 'none';
            }
        });
 
        exitFullscreenButton.addEventListener('click', function() {
            navbarCollapse.classList.remove('show');
            exitFullscreenButton.style.display = 'none';
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
    const wishlistIcons = document.querySelectorAll('.wishlist-icon');

    wishlistIcons.forEach(icon => {
        icon.addEventListener('click', function() {
            const productId = this.parentElement.getAttribute('product_id');

            fetch('/categories')
    .then(response => response.json())
    .then(categories => {
        const categoryDropdown = document.getElementById('categoryDropdown');
        categories.forEach(category => {
            const categoryItem = document.createElement('li');
            // Check if the category name is "Trousers & Shorts"
            if (category.category_name === 'Trousers & Shorts') {
                // Set a custom href attribute for "Trousers & Shorts"
                categoryItem.innerHTML = `<a class="dropdown-item" href="/Trousersnshorts">Trousers and Shorts</a>`;
            } else {
                // For other categories, check if the category has a page
                if (category.has_page) {
                    // If the category has a page, use the category name as the href attribute
                    categoryItem.innerHTML = `<a class="dropdown-item" href="/${category.category_name}">${category.category_name}</a>`;
                } else {
                    // If the category doesn't have a page, include the default layout
                    categoryItem.innerHTML = `
                        <a class="dropdown-item" href="#">${category.category_name}</a>
                        <object type="text/html" data="default_category_layout.html" ></object>`;
                }
            }
            categoryDropdown.appendChild(categoryItem);
        });

        // Add "View all" category
        const viewAllCategoryItem = document.createElement('li');
        viewAllCategoryItem.innerHTML = `<a class="dropdown-item" href="/productall">View all</a>`;
        categoryDropdown.appendChild(viewAllCategoryItem);
    })
    .catch(error => console.error('Error fetching categories:', error));

        });
    });
});

</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
    const wishlistIcons = document.querySelectorAll('.wishlist-icon');

    wishlistIcons.forEach(icon => {
        icon.addEventListener('click', function() {
            const productId = this.parentElement.getAttribute('product_id');

            // Make an AJAX request to add the product to the wishlist
            fetch('/addwishlist', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ productId: productId })
            })
            .then(response => {
                if (response.ok) {
                    // If adding to wishlist is successful, redirect to wishlist page
                    
                } else {
                    // Handle error response if needed
                    console.error('Failed to add product to wishlist');
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    });
});

</script>

<script>
    // JavaScript to handle click event on wishlist icon
    document.addEventListener("DOMContentLoaded", function() {
        const wishlistIcons = document.querySelectorAll('.wishlist-icon');

        wishlistIcons.forEach(icon => {
            icon.addEventListener('click', function() {
                icon.querySelector('i').classList.toggle('clicked'); // Toggle clicked class
            });
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
      fetch('/categories')
      .then(response => response.json())
      .then(categories => {
          const categoryDropdown = document.getElementById('categoryDropdown');
          categories.forEach(category => {
              const categoryItem = document.createElement('li');
              let categoryHTML = ''; // Define categoryHTML here
              if (category.category_name === 'trousers & shorts' || category.category_name === 'bag' || category.category_name === 'top' || category.category_name === 'shoes') {
                  // Construct the HTML string for each category item
                  if (category.category_name === 'top') {
                      categoryHTML = `<a class="dropdown-item" href="/Top">Top</a>`;
                  } else if (category.category_name === 'trousers & shorts') {
                      categoryHTML = `<a class="dropdown-item" href="/Trousersnshorts">Trousers and Shorts</a>`;
                  } else if (category.category_name === 'bag') {
                      categoryHTML = `<a class="dropdown-item" href="/Bag">Bag</a>`;
                  } else if (category.category_name === 'shoes') {
                      categoryHTML = `<a class="dropdown-item" href="/Shoes">Shoes</a>`;
                  }
                  categoryItem.innerHTML = categoryHTML; 
              } else {
                  categoryItem.innerHTML = `<a class="dropdown-item" href="/default_category_layout?category_id=${category.category_id}&category_name=${category.category_name}">${category.category_name}</a>`;
              }
              categoryDropdown.appendChild(categoryItem); 
          });
  
          const viewAllCategoryItem = document.createElement('li');
          viewAllCategoryItem.innerHTML = `<a class="dropdown-item" href="/productall">View all</a>`;
          categoryDropdown.appendChild(viewAllCategoryItem);
      })
      .catch(error => console.error('Error fetching categories:', error));
  });
  
</script>
</body>
</html>